.action{/*è·å–æ–‡æ¡£çš„åŸºæœ¬ä¿¡æ¯*/}
.action{$notebox :=" "}
.action{$docid:=.id}
.action{$getdocInfo := (queryBlocks "SELECT * FROM blocks WHERE id='?' and type='d' " $docid )}
.action{range $v:= $getdocInfo}
	.action{$notebox =$v.Box}	
.action{end}

.action{ $anchorSunday := "2022-12-25" }
.action{ $yearStartDate := now.Year | printf "%d-01-01" | toDate "2006-01-02" }
.action{ $ysDateDuration := div ($yearStartDate.Sub (toDate "2006-01-02" $anchorSunday)).Hours 24 }
.action{ $ysWeekDay := mod $ysDateDuration 7 }
.action{ $yearStartWeek := add (div (sub $ysDateDuration 1) 7) 1 }
.action{ if or (eq $ysWeekDay 0) (gt $ysWeekDay 4) }
    .action{ $yearStartWeek := add $yearStartWeek 1 }
.action{ end }

.action{ $nowWeek := add (div (div (now.Sub (toDate "2006-01-02" $anchorSunday)).Hours 24) 7) 1 }
.action{ $weeks := add (sub $nowWeek $yearStartWeek) 1 }

.action{$today:= (now | date "2006-01")}
.action{$weekResult:= (list $today "Week" $weeks| join " ")}





.action{ $nextYear := now.Year | add 1 }
.action{ $nextYearStart := $nextYear | printf "%d-01-01" | toDate "2006-01-02" }
.action{ $dayleft := (div (($nextYearStart).Sub now).Hours 24) }
.action{$week := add (mod (div ((toDate "2006-01-02" "2050-03-13").Sub now).Hours 24) 7) 1}

{{{col
{{{row
ğŸ• åˆ›å»ºæ—¶é—´ï¼š.action{now | date "2006-01-02 15:04"} .action{last (slice (list "æ˜ŸæœŸå…­" "æ˜ŸæœŸäº”" "æ˜ŸæœŸå››" "æ˜ŸæœŸä¸‰" "æ˜ŸæœŸäºŒ" "æ˜ŸæœŸä¸€" "æ˜ŸæœŸå¤©") 0 $week )}
}}}
{{{row
è·ç¦» `.action{ $nextYearStart.Year }-01-01` è¿˜å‰© `.action{$dayleft}` å¤©ï¼ŒåŠ æ²¹ï¼
}}}
{: style="color: var(--b3-card-info-color); background-color: var(--b3-card-info-background);"}
}}}


{{{row

## Schedule

{: name=".action{now | date "2006-01-02"}"}




{{{col
{{{row

### â°é‡ç‚¹å·¥ä½œ

---

- [ ] 


}}}

{{{row

### â›±äº‹åŠ¡æ±‡æ€»

---

- ğŸ“Project
- ğŸ“Area
- ğŸ“Resource

}}}

}}}
{: name="" fold="0"}
.action{/*sä¸Šé¢è®¾ç½®å‘½åä¸ºç©ºå’Œä¸æŠ˜å ,ä¸ºäº†é˜²æ­¢è¶…çº§å—å†…éƒ¨çš„å±æ€§é”™ä½,è¢«è¶…çº§å—è·å–*/}
}}}

{{{row

## âœä»Šæ—¥æ€»ç»“

{: alias=".action{now | date "2006-01"} Week .action{$weeks}" name=".action{now | date "2006-01-02"}"}



}}}
{: name="" fold="0"}

.action{/*sä¸Šé¢è®¾ç½®å‘½åä¸ºç©ºå’Œä¸æŠ˜å ,ä¸ºäº†é˜²æ­¢è¶…çº§å—å†…éƒ¨çš„å±æ€§é”™ä½,è¢«è¶…çº§å—è·å–*/}
---

## ğŸ§ è‡ªæˆ‘æå‡



{: name="" fold="0"}

---

## ğŸ˜Šå°ç¡®å¹¸


{: name="" fold="0"}

---

## ğŸŒæ˜æ—¥å®‰æ’

-

---


.action{$dayleft := (div ((toDate "2006-01-02" "2023-01-01").Sub now).Hours 24)}

## ğŸš´ éšæœºå¤ä¹ 


{{SELECT * FROM blocks where type = 'd' and root_id != '20250121141518-90pz2vy' and  box not like '20241109232540-o4xynpr' ORDER BY random() LIMIT 1}}

.action{/* è·å–ä»Šå¤©æ—¥æœŸå’Œæ˜ŸæœŸ */}
.action{$today := now | date "2006-01-02" }
.action{$weekday := now | date "Mon" }
.action{/* å·¥ä½œæ—¥ç”¨çº¢è‰²å›¾æ ‡ï¼Œå‘¨æœ«ç”¨è“è‰²å›¾æ ‡ */}
.action{$color := "red"}
.action{if or (eq $weekday "Sat")  (eq $weekday "Sun") }
.action{$color = "blue"}
.action{else} 
.action{$color = "red"}
.action{end} 
.action{/* è®¾ç½®æ–‡æ¡£å›¾æ ‡ï¼šé€‰æ‹©type6ï¼Œä»…è¿”å›æ˜ŸæœŸæ ·å¼ */}
{: icon="api/icon/getDynamicIcon?type=6&date=.action{$today}&color=.action{$color}"   type="doc"}

